var __extends=this&&this.__extends||function(){var n=function(t,i){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,t){n.__proto__=t}||function(n,t){for(var i in t)t.hasOwnProperty(i)&&(n[i]=t[i])},n(t,i)};return function(t,i){function r(){this.constructor=t}n(t,i);t.prototype=i===null?Object.create(i):(r.prototype=i.prototype,new r)}}(),__spreadArrays=this&&this.__spreadArrays||function(){for(var i=0,n=0,r=arguments.length;n<r;n++)i+=arguments[n].length;for(var u=Array(i),f=0,n=0;n<r;n++)for(var e=arguments[n],t=0,o=e.length;t<o;t++,f++)u[f]=e[t];return u},__assign=this&&this.__assign||function(){return __assign=Object.assign||function(n){for(var t,r,i=1,u=arguments.length;i<u;i++){t=arguments[i];for(r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},__assign.apply(this,arguments)};define("testobject",["require","exports","jriapp"],function(n,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=[{num:1,someVal:"someVal1"},{num:2,someVal:"someVal2"},{num:3,someVal:"someVal3"},{num:4,someVal:"someVal4"},{num:5,someVal:"someVal5"}],u=function(n){function t(t){var u=n.call(this,t)||this;return u._testValue="0",u._page=1,u._rows=r,u._reverseCommand=new i.Command(function(){u.rows=__spreadArrays(u._rows).reverse()}),u._selectedRow=null,u}return __extends(t,n),t.prototype.dispose=function(){this.getIsDisposed()||(this.setDisposing(),n.prototype.dispose.call(this))},Object.defineProperty(t.prototype,"testValue",{get:function(){return this._testValue},set:function(n){this._testValue!==n&&(this._testValue=n,this.objEvents.raiseProp("testValue"))},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"rows",{get:function(){return this._rows},set:function(n){this._rows!==n&&(this._rows=n,this.objEvents.raiseProp("rows"))},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"page",{get:function(){return this._page},set:function(n){this._page!==n&&(this._page=n,this.objEvents.raiseProp("page"))},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"reverseCommand",{get:function(){return this._reverseCommand},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"selectedRow",{get:function(){return this._selectedRow},set:function(n){this._selectedRow!==n&&(this._selectedRow=n,this.objEvents.raiseProp("selectedRow"))},enumerable:!0,configurable:!0}),t}(i.ViewModel);t.TestObject=u});define("app",["require","exports","jriapp","testobject"],function(n,t,i,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var u=function(n){function t(t){var i=n.call(this,t)||this;return i._testObj=null,i}return __extends(t,n),t.prototype.onStartUp=function(){var t=this;this._testObj=new r.TestObject(this);this.objEvents.addOnError(function(n,t){t.isHandled=!0;alert(t.error.message)});n.prototype.onStartUp.call(this)},t.prototype.dispose=function(){this.getIsDisposed()||this.setDisposing()},Object.defineProperty(t.prototype,"testObj",{get:function(){return this._testObj},enumerable:!0,configurable:!0}),t}(i.Application);t.DemoApplication=u});define("views/react",["require","exports","jriapp","jriapp_ui","react-dom","redux"],function(n,t,i,r,u,f){"use strict";function e(n,t){var r={};return Object.keys(t).forEach(function(u){r[u]=i.Utils.check.isNt(n[u])?t[u]:n[u]}),r}Object.defineProperty(t,"__esModule",{value:!0});t.mergeOptions=e;var o=function(n){function t(t,i,r){var u=n.call(this,t,i)||this;return u._isRendering=!1,u._isDirty=!1,u._isMounted=!1,u._store=f.createStore(r),u._state=u._store.getState(),u._unsubscribe=u._store.subscribe(function(){if(!u.getIsStateDirty()){var t=u._state,n=u._store.getState();u._state=n;u.storeChanged(n,t)&&u._renderView()}}),u}return __extends(t,n),t.prototype._render=function(){var n=this;if(!this.getIsStateDirty()){if(this._isRendering){this._isDirty=!0;return}this._isRendering=!0;this._isDirty=!1;u.render(this.getMarkup(),this.el,function(){n._isRendering=!1;n._isDirty&&n._render()})}},t.prototype._renderView=function(){this._isDirty=!0;this._isMounted&&this._render()},t.prototype.viewMounted=function(){this._isMounted=!0;this._renderView()},t.prototype.dispatch=function(n){this._store.dispatch(n)},t.prototype.dispose=function(){this.getIsDisposed()||(this.setDisposing(),this._isRendering=!1,this._isDirty=!1,this._isMounted=!1,this._unsubscribe(),u.unmountComponentAtNode(this.el),n.prototype.dispose.call(this))},Object.defineProperty(t.prototype,"store",{get:function(){return this._store},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"state",{get:function(){return this._state},enumerable:!0,configurable:!0}),t.prototype.toString=function(){return"ReactElView"},t}(r.BaseElView);t.ReactElView=o});define("abstractions/simple",["require","exports"],function(n,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0})});define("actions/simple",["require","exports"],function(n,t){"use strict";function i(n,t){return{type:"CHANGE_PROP",name:n,value:t}}Object.defineProperty(t,"__esModule",{value:!0});t.propertyChanged=i});define("views/simple",["require","exports","react","views/react","actions/simple"],function(n,t,i,r,u){"use strict";function l(n){n.registerElView("simpleview",f)}Object.defineProperty(t,"__esModule",{value:!0});var e={display:"inline-block",marginLeft:"15px",marginRight:"5px"},o={color:"blue"},s=function(n,t,i){var r;switch(i.type){case"CHANGE_PROP":return __assign(__assign({},t),(r={},r[i.name]=i.value,r));default:return t||n}},h=function(n){return function(t,i){return s(n,t,i)}},c={value:"0",title:""},f=function(n){function t(t,i){var f=this,u=r.mergeOptions(i,c);return n.call(this,t,i,h(u))||this}return __extends(t,n),t.prototype.storeChanged=function(n,t){var i=!1;return n.title!==t.title&&(this.objEvents.raiseProp("title"),i=!0),n.value!==t.value&&(this.objEvents.raiseProp("value"),i=!0),i},t.prototype.getMarkup=function(){var r=this,n=this.state,t={spacer:e,span:o},u={tempChanged:function(n){r.value=n}};return i.createElement("fieldset",null,i.createElement("legend",null,n.title?n.title:"This is a React component"),i.createElement("input",{value:n.value,onChange:function(n){return u.tempChanged(n.target.value)}}),i.createElement("span",{style:t.spacer},"You entered: "),i.createElement("span",{style:t.span},n.value))},Object.defineProperty(t.prototype,"value",{get:function(){return this.state.value},set:function(n){this.dispatch(u.propertyChanged("value",n))},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"title",{get:function(){return this.state.title},set:function(n){this.dispatch(u.propertyChanged("title",n))},enumerable:!0,configurable:!0}),t.prototype.toString=function(){return"SimpleElView"},t}(r.ReactElView);t.SimpleElView=f;t.initModule=l});define("abstractions/pager",["require","exports"],function(n,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0})});define("actions/pager",["require","exports"],function(n,t){"use strict";function i(n,t){return{type:"CHANGE_PROP",name:n,value:t}}Object.defineProperty(t,"__esModule",{value:!0});t.propertyChanged=i});define("components/pager",["require","exports","react"],function(n,t,i){"use strict";function s(n,t){for(var r=[],i=n;i<t;i++)r.push(i);return r}Object.defineProperty(t,"__esModule",{value:!0});var f=0,r=1,e={first:"First",prev:"«",prevSet:"...",nextSet:"...",next:"»",last:"Last"},o=function(n){function t(t){var i=n.call(this,t)||this;return i.handleFirstPage=i.handleFirstPage.bind(i),i.handlePreviousPage=i.handlePreviousPage.bind(i),i.handleNextPage=i.handleNextPage.bind(i),i.handleLastPage=i.handleLastPage.bind(i),i.handleMorePrevPages=i.handleMorePrevPages.bind(i),i.handleMoreNextPages=i.handleMoreNextPages.bind(i),i.handlePageChanged=i.handlePageChanged.bind(i),i}return __extends(t,n),t.prototype.getTitles=function(n){return this.props.titles[n]||e[n]},t.prototype.calcBlocks=function(){var n=this.props,i=n.total,t=n.visiblePages,u=n.current+r,f=Math.ceil(i/t),e=Math.ceil(u/t)-r;return{total:f,current:e,size:t}},t.prototype.isPrevDisabled=function(){return this.props.current<=f},t.prototype.isNextDisabled=function(){return this.props.current>=this.props.total-r},t.prototype.isPrevMoreHidden=function(){var n=this.calcBlocks();return n.total===r||n.current===f},t.prototype.isNextMoreHidden=function(){var n=this.calcBlocks();return n.total===r||n.current===n.total-r},t.prototype.visibleRange=function(){var n=this.calcBlocks(),t=n.current*n.size,i=this.props.total-t,u=t+(i>n.size?n.size:i);return[t+r,u+r]},t.prototype.handleFirstPage=function(){this.isPrevDisabled()||this.handlePageChanged(f)},t.prototype.handlePreviousPage=function(){this.isPrevDisabled()||this.handlePageChanged(this.props.current-r)},t.prototype.handleNextPage=function(){this.isNextDisabled()||this.handlePageChanged(this.props.current+r)},t.prototype.handleLastPage=function(){this.isNextDisabled()||this.handlePageChanged(this.props.total-r)},t.prototype.handleMorePrevPages=function(){var n=this.calcBlocks();this.handlePageChanged(n.current*n.size-r)},t.prototype.handleMoreNextPages=function(){var n=this.calcBlocks();this.handlePageChanged((n.current+r)*n.size)},t.prototype.handlePageChanged=function(n){var t=this.props.onPageChanged;!t||t(n)},t.prototype.renderPages=function(n){var t=this;return s(n[0],n[1]).map(function(n,f){var e=n-r,o=t.handlePageChanged.bind(t,e),s=t.props.current===e;return i.createElement(u,{key:f,index:f,isActive:s,className:"btn-numbered-page",onClick:o},n)})},t.prototype.render=function(){var n=this.getTitles.bind(this),t="pagination";return this.props.className&&(t+=" "+this.props.className),i.createElement("nav",null,i.createElement("ul",{className:t},i.createElement(u,{className:"btn-first-page",key:"btn-first-page",isDisabled:this.isPrevDisabled(),onClick:this.handleFirstPage},n("first")),i.createElement(u,{className:"btn-prev-page",key:"btn-prev-page",isDisabled:this.isPrevDisabled(),onClick:this.handlePreviousPage},n("prev")),i.createElement(u,{className:"btn-prev-more",key:"btn-prev-more",isHidden:this.isPrevMoreHidden(),onClick:this.handleMorePrevPages},n("prevSet")),this.renderPages(this.visibleRange()),i.createElement(u,{className:"btn-next-more",key:"btn-next-more",isHidden:this.isNextMoreHidden(),onClick:this.handleMoreNextPages},n("nextSet")),i.createElement(u,{className:"btn-next-page",key:"btn-next-page",isDisabled:this.isNextDisabled(),onClick:this.handleNextPage},n("next")),i.createElement(u,{className:"btn-last-page",key:"btn-last-page",isDisabled:this.isNextDisabled(),onClick:this.handleLastPage},n("last"))))},t}(i.Component),u=function(n){if(n.isHidden)return null;var t=n.className?n.className+" ":"",r=""+t+(n.isActive?" active":"")+(n.isDisabled?" disabled":"");return i.createElement("li",{key:n.index,className:r},i.createElement("a",{onClick:n.onClick},n.children))};t.default=o});define("components/connected-pager",["require","exports","react-redux","actions/pager","components/pager"],function(n,t,i,r,u){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var f=function(n){return n},e=function(n){return{onPageChanged:function(t){n(r.propertyChanged("current",t))}}};t.default=i.connect(f,e)(u.default)});define("views/pager",["require","exports","react","react-redux","views/react","actions/pager","components/connected-pager"],function(n,t,i,r,u,f,e){"use strict";function l(n){n.registerElView("pagerview",o)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(n,t,i){var r;switch(i.type){case"CHANGE_PROP":return __assign(__assign({},t),(r={},r[i.name]=i.value,r));default:return t||n}},h=function(n){return function(t,i){return s(n,t,i)}},c={total:20,current:6,visiblePages:7},o=function(n){function t(t,i){var f=this,r=u.mergeOptions(i,c);return n.call(this,t,i,h(r))||this}return __extends(t,n),t.prototype.storeChanged=function(n,t){return n.total!==t.total&&this.objEvents.raiseProp("total"),n.current!==t.current&&this.objEvents.raiseProp("current"),n.visiblePages!==t.visiblePages&&this.objEvents.raiseProp("visiblePages"),!1},t.prototype.getMarkup=function(){return i.createElement(r.Provider,{store:this.store},i.createElement(e.default,{titles:{first:"<|",last:"|>"}}))},Object.defineProperty(t.prototype,"total",{get:function(){return this.state.total},set:function(n){this.dispatch(f.propertyChanged("total",n))},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"current",{get:function(){return this.state.current},set:function(n){this.dispatch(f.propertyChanged("current",n))},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"visiblePages",{get:function(){return this.state.visiblePages},set:function(n){this.dispatch(f.propertyChanged("visiblePages",n))},enumerable:!0,configurable:!0}),t.prototype.toString=function(){return"PagerElView"},t}(u.ReactElView);t.PagerElView=o;t.initModule=l});define("abstractions/templated",["require","exports"],function(n,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0})});define("actions/templated",["require","exports"],function(n,t){"use strict";function i(n,t){return{type:"CHANGE_PROP",name:n,value:t}}Object.defineProperty(t,"__esModule",{value:!0});t.propertyChanged=i});define("components/template",["require","exports","react","jriapp/template","jriapp_shared/utils/weakmap"],function(n,t,i,r,u){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var f=u.createWeakMap(),e=function(n){function t(t){var i=n.call(this,t)||this;return i._div=null,i._handleClick=i._handleClick.bind(i),i._setDiv=i._setDiv.bind(i),i}return __extends(t,n),t.prototype._handleClick=function(){if(!!this.props.onClick)this.props.onClick(this.props.dataContext)},t.prototype._setDiv=function(n){this._div!==n&&(t._disposeTemplate(this._div),this._div=n)},t._updateTemplate=function(n,i){if(!!n){var r=t._getTemplate(n);!r||(r.templateID=i.templateId,r.dataContext=i.dataContext)}},t._disposeTemplate=function(n){if(!!n){var t=f.get(n);!t||(t.dispose(),f.delete(n))}},t._getTemplate=function(n){if(!n)return null;var t=f.get(n);return t||(t=r.createTemplate({parentEl:n}),f.set(n,t)),t},t.prototype.componentDidMount=function(){t._updateTemplate(this._div,this.props)},t.prototype.componentDidUpdate=function(){t._updateTemplate(this._div,this.props)},t.prototype.componentWillUnmount=function(){t._disposeTemplate(this._div)},t.prototype.shouldComponentUpdate=function(n){var r=this.props.dataContext!==n.dataContext||this.props.templateId!==n.templateId,i=this.props.className!==n.className||this.props.style!==n.style||this.props.onClick!==n.onClick;return r&&!i&&(this._div?t._updateTemplate(this._div,n):i=!0),i},t.prototype.render=function(){var n=this.props.style?this.props.style:{},t=this.props.className?this.props.className:"";return i.createElement("div",{onClick:this._handleClick,className:t,style:n,ref:this._setDiv})},t}(i.Component);t.default=e});define("views/templated",["require","exports","react","views/react","actions/templated","components/template"],function(n,t,i,r,u,f){"use strict";function l(n){n.registerElView("templatedview",e)}Object.defineProperty(t,"__esModule",{value:!0});var o={display:"inline-block"},s=function(n,t,i){var r;switch(i.type){case"CHANGE_PROP":return __assign(__assign({},t),(r={},r[i.name]=i.value,r));default:return t||n}},h=function(n){return function(t,i){return s(n,t,i)}},c={templateId:"",keyName:"",selectedRow:null},e=function(n){function t(t,i){var u=this,f=r.mergeOptions(i,c);return u=n.call(this,t,i,h(f))||this,u._handleClick=u._handleClick.bind(u),u}return __extends(t,n),t.prototype._handleClick=function(n){this.selectedRow=n},t.prototype.storeChanged=function(n,t){var i=!1;return n.templateId!==t.templateId&&(this.objEvents.raiseProp("templateId"),i=!0),n.rows!==t.rows&&(this.objEvents.raiseProp("rows"),i=!0),n.selectedRow!==t.selectedRow&&(this.objEvents.raiseProp("selectedRow"),i=!0),i},t.prototype.getMarkup=function(){var u=this,n=this.state,t=n.keyName,e=n.templateId,s=n.rows,r=n.selectedRow;return i.createElement(i.Fragment,null,s.map(function(n){return i.createElement(f.default,{key:""+n[t],onClick:u._handleClick,className:!!r&&r[t]===n[t]?"demo-row selected":"demo-row",style:o,templateId:e,dataContext:n})}))},Object.defineProperty(t.prototype,"templateId",{get:function(){return this.state.templateId},set:function(n){this.dispatch(u.propertyChanged("templateId",n))},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"rows",{get:function(){return this.state.rows},set:function(n){this.dispatch(u.propertyChanged("rows",n))},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"keyName",{get:function(){return this.state.keyName},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"selectedRow",{get:function(){return this.state.selectedRow},set:function(n){this.dispatch(u.propertyChanged("selectedRow",n))},enumerable:!0,configurable:!0}),t.prototype.toString=function(){return"TemplatedElView"},t}(r.ReactElView);t.TemplatedElView=e;t.initModule=l});define("main",["require","exports","jriapp","app","views/simple","views/pager","views/templated"],function(n,t,i,r,u,f,e){"use strict";function h(n){return n.modulesInits=s.core.extend(n.modulesInits||{},{simpleview:u.initModule,templatedview:e.initModule,pagerview:f.initModule}),o.startApp(function(){return new r.DemoApplication(n)})}Object.defineProperty(t,"__esModule",{value:!0});var o=i.bootstrap,s=i.Utils;o.objEvents.addOnError(function(n,t){alert(t.error.message);t.isHandled=!0});t.start=h});